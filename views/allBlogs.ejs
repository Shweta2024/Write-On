<%- include("partials/header") -%>



<div id="allBlogsMode">

    <p>Create a blog</p>
    <button id="writeButton" class="btn btn-primary">Write</button>

    <h1>Explore blogs!</h1>

    <br>

    <% blogs.forEach( (blog)=> { %>
    <h3><%=blog.blogTitle%></h3>
    <p>
        <%=blog.blogBody.split(' ').slice(0,50).join(' ')%>
        ...<a href="/api/blogs/<%=blog._id%>">Read more</a>
    </p>
    <%})%>
</div>


<div id="createBlogMode" style="display: none;">
    <form action="/api/blogs" method="post">
        <div class="form-group">
            <label for="blogTitle">Title</label>
            <input type="text" class="form-control" id="blogTitle" name="blogTitle" placeholder="Enter title of the blog">
            <label for="blogBody">Post</label>
            <textarea class="form-control" id="blogBody" name="blogBody" rows="5" cols="30"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Publish</button>
    </form>
    <button id="cancelButton" type="submit" class="btn btn-primary">Cancel</button>
</div>
<%- include("partials/footer") -%>

<script>
    
    
    const writeButton = document.getElementById("writeButton")
    const allBlogsMode = document.getElementById("allBlogsMode")
    const cancelButton = document.getElementById("cancelButton")
    const createBlogMode = document.getElementById("createBlogMode")


    //  handle WRITE click event
    writeButton.addEventListener('click', () => {
        allBlogsMode.style.display = 'none'
        createBlogMode.style.display = 'block'
    })


    //  handle CANCEL click event
    cancelButton.addEventListener('click', () => {
        allBlogsMode.style.display = 'block'
        createBlogMode.style.display = 'none'
    })

</script>